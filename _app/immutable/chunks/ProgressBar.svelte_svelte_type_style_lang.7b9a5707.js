import{w as b}from"./index.d99625a3.js";import{aj as _}from"./index.f9c4f2e2.js";b(void 0);const P=b(void 0);function B(e){return e instanceof Node}function se(e,n){if(!n.event||!n.target)return;const{computePosition:o,autoUpdate:s,flip:i,shift:l,offset:u,arrow:m}=_(P),t=document.querySelector(`[data-popup="${n.target}"]`),g=(t==null?void 0:t.querySelector(".arrow"))??null;let c=!1,v;const L=':is(a[href], button, input, textarea, select, details, [tabindex]):not([tabindex="-1"])';let a,w;function k(){var d,f,E,y;if(!t||!o)return;const r=[];u&&r.push(u(((d=n.middleware)==null?void 0:d.offset)??8)),l&&r.push(l(((f=n.middleware)==null?void 0:f.shift)??{padding:8})),i&&r.push(i((E=n.middleware)==null?void 0:E.flip)),m&&g&&r.push(m(((y=n.middleware)==null?void 0:y.arrow)??{element:g})),o(e,t,{placement:n.placement??"bottom",middleware:r}).then(({x:j,y:H,placement:V,middlewareData:W})=>{if(Object.assign(t.style,{left:`${j}px`,top:`${H}px`}),g){const{x:O,y:N}=W.arrow,z={top:"bottom",right:"left",bottom:"top",left:"right"}[V.split("-")[0]];Object.assign(g.style,{left:O!=null?`${O}px`:"",top:N!=null?`${N}px`:"",right:"",bottom:"",[z]:"-4px"})}q()})}function q(){var r;t&&(w=Array.from(t==null?void 0:t.querySelectorAll(L)),a=-1,a=0,n.event!=="focus"&&n.event!=="focus-click"&&((r=w[0])==null||r.focus()))}function F(r){if(!r)return;const d=!n.closeQuery||n.closeQuery===""?"a[href], button":n.closeQuery,f=t==null?void 0:t.querySelectorAll(d);f!=null&&f.length&&f.forEach(E=>{E.contains(r)&&p()})}const S=r=>{if(!e||!t)return;e.contains(r.target)?c==!1?h():p():t&&!t.contains(r.target)?p():F(r.target)},Q=()=>{h(),c=!0,D(!0)},$=()=>{p(),c=!1,D(!1)};function U(){c||e.focus()}function x(r){r.relatedTarget instanceof Element&&(t!=null&&t.contains(r.relatedTarget)||e.isSameNode(r.relatedTarget))||p()}function C(r){if(r.preventDefault(),B(document.activeElement)){if(!e.isSameNode(document.activeElement)){e.focus();return}c?p():h()}}function h(){t&&(k(),t.style.display="block",t.style.opacity="1",c=!0,D(!0),v=s(e,t,k))}function p(){if(!t)return;t.style.opacity="0";const r=parseFloat(window.getComputedStyle(t).transitionDuration.replace("s",""))*1e3;setTimeout(()=>{t.style.display="none",c=!1,D(!1)},r),v&&v()}const D=r=>{n.state&&n.state({state:r})},I=r=>{var f,E,y;if(!c)return;const d=r.key;if(d==="Escape"||document.activeElement===e&&d==="Tab"){r.preventDefault(),p(),e.focus();return}else d==="ArrowDown"?(r.preventDefault(),a<w.length-1&&(a+=1,(f=w[a])==null||f.focus())):d==="ArrowUp"&&(r.preventDefault(),a>0?(a-=1,(E=w[a])==null||E.focus()):w.length&&a===-1&&(r.preventDefault(),a=w.length-1,(y=w[a])==null||y.focus()))};if(k(),n.event==="click"&&window.addEventListener("click",S,!0),n.event==="hover"&&(e.addEventListener("mouseover",h,!0),e.addEventListener("mouseout",p,!0)),n.event==="hover-click"&&(e.addEventListener("mouseover",h,!0),window.addEventListener("click",S,!0)),n.event==="focus"||n.event==="focus-click"){if(!t)return;e.addEventListener("focusin",h,!0),e.addEventListener("focusout",x,!0),t.addEventListener("focusin",U,!0),t.addEventListener("focusout",x,!0),t.addEventListener("click",S,!0)}return n.event==="focus-click"&&e.addEventListener("mousedown",C,!0),window.addEventListener("keydown",I,!0),{update(r){n=r,k()},destroy(){window.removeEventListener("click",S,!0),e.removeEventListener("mouseover",Q,!0),e.removeEventListener("mouseout",$,!0),e.removeEventListener("focusin",h,!0),e.removeEventListener("focusout",x,!0),e.removeEventListener("mousedown",C,!0),t==null||t.removeEventListener("focusin",U,!0),t==null||t.removeEventListener("focusout",x,!0),window.removeEventListener("keydown",I,!0)}}}function J(){const{subscribe:e,set:n,update:o}=b({});return{subscribe:e,set:n,update:o,open:s=>o(()=>({open:!0,...s})),close:()=>o(s=>(s.open=!1,s))}}const oe=J();function K(){const{subscribe:e,set:n,update:o}=b([]);return{subscribe:e,set:n,update:o,trigger:s=>o(i=>(i.push(s),i)),close:()=>o(s=>(s.length>0&&s.shift(),s)),clear:()=>n([])}}K();const X={message:"Missing Toast Message",autohide:!0,timeout:5e3};function Y(){const e=Math.random();return Number(e).toString(32)}function G(e){if(e.autohide===!0)return setTimeout(()=>{Z.close(e.id)},e.timeout)}function R(){const{subscribe:e,set:n,update:o}=b([]);return{subscribe:e,trigger:s=>o(i=>{const l=Y();s&&s.callback&&s.callback({id:l,status:"queued"});const u={...X,...s,id:l};return u.timeoutId=G(u),i.push(u),i}),close:s=>o(i=>{if(i.length>0){const l=i.findIndex(m=>m.id===s),u=i[l];u&&(u.callback&&u.callback({id:s,status:"closed"}),u.timeoutId&&clearTimeout(u.timeoutId),i.splice(l,1))}return i}),clear:()=>n([])}}const Z=R(),T={};function A(e){return e==="local"?localStorage:sessionStorage}function M(e,n,o){const s=(o==null?void 0:o.serializer)??JSON,i=(o==null?void 0:o.storage)??"local",l=typeof window<"u"&&typeof document<"u";function u(m,t){l&&A(i).setItem(m,s.stringify(t))}if(!T[e]){const m=b(n,c=>{const v=l?A(i).getItem(e):null;if(v&&c(s.parse(v)),l){const L=a=>{a.key===e&&c(a.newValue?s.parse(a.newValue):null)};return window.addEventListener("storage",L),()=>window.removeEventListener("storage",L)}}),{subscribe:t,set:g}=m;T[e]={set(c){u(e,c),g(c)},update(c){const v=c(_(m));u(e,v),g(v)},subscribe:t}}return T[e]}M("modeOsPrefers",!1);const ee=M("modeUserPrefers",void 0),te=M("modeCurrent",!1);function ie(e){ee.set(e)}function ce(e){const n=document.documentElement.classList,o="dark";e===!0?n.remove(o):n.add(o),te.set(e)}function ue(){const e=document.documentElement.classList,n=localStorage.getItem("modeUserPrefers")==="false",o=!("modeUserPrefers"in localStorage),s=window.matchMedia("(prefers-color-scheme: dark)").matches;n||o&&s?e.add("dark"):e.remove("dark")}export{ie as a,ce as b,P as c,oe as d,ee as e,M as l,te as m,se as p,ue as s,Z as t};
