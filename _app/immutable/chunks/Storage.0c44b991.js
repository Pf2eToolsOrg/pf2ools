import{w as R}from"./index.1134a329.js";import{_ as s}from"./preload-helper.41c905a7.js";import{D as d,n as f}from"./Toasts.d5c3a5f8.js";Map.prototype.filter=Map.prototype.filter||function(r){const o=new Map;for(const[t,e]of this)r(e,t)&&o.set(t,e);return o};Map.prototype.map=Map.prototype.map||function(r){const o=new Map;for(const[t,e]of this)o.set(t,r(e,t));return o};Map.prototype.toValueArray=Map.prototype.toValueArray||function(){return[...this.values()]};Map.prototype.toKeyArray=Map.prototype.toKeyArray||function(){return[...this.keys()]};Map.prototype.firstKey=Map.prototype.firstKey||function(){return this.toKeyArray()[0]};Map.prototype.firstValue=Map.prototype.firstValue||function(){return this.toValueArray()[0]};Array.prototype.toTitleCase=Array.prototype.toTitleCase||function(){return this.map(r=>r.toTitleCase())};Array.prototype.joinConjunct=Array.prototype.joinConjunct||function(r,o,t){if(this.length===0)return"";if(this.length===1)return this[0];if(this.length===2)return this.join(o);{let e="";for(let n=0;n<this.length;++n)e+=this[n],n<this.length-2?e+=r:n===this.length-2&&(e+=`${!t&&this.length>2?r.trim():""}${o}`);return e}};String.prototype.remove=function(r){return this.replaceAll(r,"")};String.prototype.uppercaseFirst=String.prototype.uppercaseFirst||function(){const r=this.toString();return r.length===0?r:r.length===1?r.charAt(0).toUpperCase():r.charAt(0).toUpperCase()+r.slice(1)};String.prototype.lowercaseFirst=String.prototype.lowercaseFirst||function(){const r=this.toString();return r.length===0?r:r.length===1?r.charAt(0).toLowerCase():r.charAt(0).toLowerCase()+r.slice(1)};String.prototype.uq=String.prototype.uq||function(){return this.unescapeQuotes()};String.prototype.toTitleCase=String.prototype.toTitleCase||function(){let r=this.replace(/([^\W_]+[^\s-/]*) */g,e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase());u._TITLE_LOWER_WORDS_RE=u._TITLE_LOWER_WORDS_RE=u.TITLE_LOWER_WORDS.map(e=>new RegExp(`\\s${e}\\s`,"gi")),u._TITLE_UPPER_WORDS_RE=u._TITLE_UPPER_WORDS_RE=u.TITLE_UPPER_WORDS.map(e=>new RegExp(`\\b${e}\\b`,"g"));const o=u.TITLE_LOWER_WORDS.length;for(let e=0;e<o;e++)r=r.replace(u._TITLE_LOWER_WORDS_RE[e],n=>n.toLowerCase());const t=u.TITLE_UPPER_WORDS.length;for(let e=0;e<t;e++)r=r.replace(u._TITLE_UPPER_WORDS_RE[e],u.TITLE_UPPER_WORDS[e].toUpperCase());return r};String.prototype.toSentenceCase=String.prototype.toSentenceCase||function(){const r=[],o=/([^.!?]+)([.!?]\s*|$)/gi;let t;do t=o.exec(this),t&&r.push(t[0].toLowerCase().uppercaseFirst());while(t);return r.join("")};String.prototype.toSpellCase=String.prototype.toSpellCase||function(){return this.toLowerCase().replace(/(^|of )(bigby|otiluke|mordenkainen|evard|hadar|agathys|abi-dalzim|aganazzar|drawmij|leomund|maximilian|melf|nystul|otto|rary|snilloc|tasha|tenser|jim)('s|$| )/g,(...r)=>`${r[1]}${r[2].toTitleCase()}${r[3]}`)};String.prototype.toCamelCase=String.prototype.toCamelCase||function(){return this.split(" ").map((r,o)=>o===0?r.toLowerCase():`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()}`).join("")};String.prototype.escapeQuotes=String.prototype.escapeQuotes||function(){return this.replace(/'/g,"&apos;").replace(/"/g,"&quot;")};String.prototype.qq=String.prototype.qq||function(){return this.escapeQuotes()};String.prototype.unescapeQuotes=String.prototype.unescapeQuotes||function(){return this.replace(/&apos;/g,"'").replace(/&quot;/g,'"')};String.prototype.uq=String.prototype.uq||function(){return this.unescapeQuotes()};String.prototype.encodeApos=String.prototype.encodeApos||function(){return this.replace(/'/g,"%27")};String.prototype.distance=String.prototype.distance||function(r){let o=this,t,e;if(o){if(!r)return o.length}else return r?r.length:0;const n=o.length,c=r.length,p=n+c,i=new Array(n+2),a={};for(t=0;t<n+2;t++)i[t]=new Array(c+2);for(i[0][0]=p,t=0;t<=n;t++)i[t+1][1]=t,i[t+1][0]=p,a[o[t]]=0;for(e=0;e<=c;e++)i[1][e+1]=e,i[0][e+1]=p,a[r[e]]=0;for(t=1;t<=n;t++){let _=0;for(e=1;e<=c;e++){const l=a[r[e-1]],m=_;o[t-1]===r[e-1]?(i[t+1][e+1]=i[t][e],_=e):i[t+1][e+1]=Math.min(i[t][e],Math.min(i[t+1][e],i[t][e+1]))+1,i[t+1][e+1]=Math.min(i[t+1][e+1],i[l]?i[l][m]+(t-l-1)+1+(e-m-1):1/0)}a[o[t-1]]=t}return i[n+1][c+1]};String.prototype.isNumeric=String.prototype.isNumeric||function(){return!isNaN(parseFloat(this))&&isFinite(this)};String.prototype.last=String.prototype.last||function(){return this[this.length-1]};String.prototype.escapeRegexp=String.prototype.escapeRegexp||function(){return this.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")};String.prototype.toUrlified=String.prototype.toUrlified||function(){return encodeURIComponent(this.toLowerCase()).toLowerCase()};String.prototype.toChunks=String.prototype.toChunks||function(r){const o=Math.ceil(this.length/r),t=new Array(o);for(let e=0,n=0;e<o;++e,n+=r)t[e]=this.substr(n,r);return t};String.prototype.toAscii=String.prototype.toAscii||function(){return this.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/Æ/g,"AE").replace(/æ/g,"ae")};String.prototype.trimChar=String.prototype.trimChar||function(r){let o=0,t=this.length;for(;o<t&&this[o]===r;)++o;for(;t>o&&this[t-1]===r;)--t;return o>0||t<this.length?this.substring(o,t):this};String.prototype.trimAnyChar=String.prototype.trimAnyChar||function(r){let o=0,t=this.length;for(;o<t&&r.indexOf(this[o])>=0;)++o;for(;t>o&&r.indexOf(this[t-1])>=0;)--t;return o>0||t<this.length?this.substring(o,t):this};let u={COMMAS_NOT_IN_PARENTHESES_REGEX:/,\s?(?![^(]*\))/g,COMMA_SPACE_NOT_IN_PARENTHESES_REGEX:/, (?![^(]*\))/g,uppercaseFirst:function(r){return r.uppercaseFirst()},TITLE_LOWER_WORDS:["a","an","the","and","but","or","for","nor","as","at","by","for","from","in","into","near","of","on","onto","to","with","over"],TITLE_UPPER_WORDS:["Id","Tv","Dm","Ok"],padNumber:(r,o,t)=>String(r).padStart(o,t),elipsisTruncate(r,o=5,t=0,e=20){if(e>=r.length)return r;e=Math.max(o+t+3,e);let n="",c=e-(3+o+t);for(let p=0;p<r.length-t;++p){const i=r[p];(p<o||c-- >0)&&(n+=i)}return c<0&&(n+="..."),n+=r.substring(r.length-t,r.length),n},toTitleCase(r){return r.toTitleCase()},getNamePart(r){return typeof r!="string"?r:r.split(" ").filter(o=>!u.TITLE_LOWER_WORDS.includes(o.toLowerCase())).join(" ")}};function T(){const{subscribe:r,set:o,update:t}=R([]);return{subscribe:r,set:o,update:t,trigger:e=>t(n=>(n.push(e),n)),close:()=>t(e=>(e.length>0&&e.shift(),e)),clear:()=>o([])}}const v=T();class g extends d{constructor(o){super(o),this.traitsPrototype=o.traits,Object.defineProperty(this,"traits",{get(){return[...new Set([this.traitsPrototype,this.size,this.rarity??"common"].flat())]}}),S.subscribe(t=>{this.heritages=t.filter(e=>e.versatile||e.ancestryName===this.name&&e.ancestrySource===this.source)})}get type(){return"ancestry"}get extraHp(){let o=[];return this.heritages.forEach(t=>{var e,n;(n=(e=t==null?void 0:t.modif)==null?void 0:e.hp)!=null&&n.ancestry&&o.push({hp:t.modif.hp.ancestry,name:t.name,source:t.source,hash:this.hashify(t.name,t.source)})}),o.length?o:null}}class E extends d{constructor(o,t){super(o),t&&(this.ancestryName=t.name,this.ancestrySource=t.source)}get type(){return"heritage"}tag(o){return`${this.ancestryName??"Human"}|${this.ancestrySource??"CRB"}|${o??this.name}|${this.name}|${this.source}`}}class j{constructor(){this.ancestries=A,this.heritages=S}loadAll(){this.ancestries.load(),this.heritages.load()}}const A=new O;function O(r="ancestries",o=new Map){const t={parse:i=>new Map(JSON.parse(i)).map(a=>new g(a)),stringify:i=>JSON.stringify([...i])},{subscribe:e,set:n,update:c}=f(r,o,{serializer:t});function p(){const i=Object.assign({"/src/data/core/ancestries/ancestry-anadi.json":()=>s(()=>import("./ancestry-anadi.c9147a4b.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-android.json":()=>s(()=>import("./ancestry-android.22dcb6be.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-automaton.json":()=>s(()=>import("./ancestry-automaton.3efcee38.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-azarketi.json":()=>s(()=>import("./ancestry-azarketi.3b917f28.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-catfolk.json":()=>s(()=>import("./ancestry-catfolk.bd5045af.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-conrasu.json":()=>s(()=>import("./ancestry-conrasu.da2e4c50.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-dwarf.json":()=>s(()=>import("./ancestry-dwarf.a9c56490.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-elf.json":()=>s(()=>import("./ancestry-elf.a6be3b57.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-fetchling.json":()=>s(()=>import("./ancestry-fetchling.e33e9008.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-fleshwarp.json":()=>s(()=>import("./ancestry-fleshwarp.595602f6.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-ghoran.json":()=>s(()=>import("./ancestry-ghoran.6df40ca1.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-gnoll.json":()=>s(()=>import("./ancestry-gnoll.126cb3ed.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-gnome.json":()=>s(()=>import("./ancestry-gnome.29e51bc5.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-goblin.json":()=>s(()=>import("./ancestry-goblin.20b6d1cf.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-goloma.json":()=>s(()=>import("./ancestry-goloma.dd6e3190.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-grippli.json":()=>s(()=>import("./ancestry-grippli.fdaff84b.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-halfling.json":()=>s(()=>import("./ancestry-halfling.869fea2a.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-hobgoblin.json":()=>s(()=>import("./ancestry-hobgoblin.1982cdf8.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-human.json":()=>s(()=>import("./ancestry-human.c6d51bf9.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-kashrishi.json":()=>s(()=>import("./ancestry-kashrishi.d4a79401.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-kitsune.json":()=>s(()=>import("./ancestry-kitsune.7a0d21b9.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-kobold.json":()=>s(()=>import("./ancestry-kobold.943b8121.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-leshy.json":()=>s(()=>import("./ancestry-leshy.4488d032.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-lizardfolk.json":()=>s(()=>import("./ancestry-lizardfolk.838c0136.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-nagaji.json":()=>s(()=>import("./ancestry-nagaji.4695cdf8.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-orc.json":()=>s(()=>import("./ancestry-orc.0dc73a51.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-poppet.json":()=>s(()=>import("./ancestry-poppet.65e96566.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-ratfolk.json":()=>s(()=>import("./ancestry-ratfolk.4edfccc8.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-shisk.json":()=>s(()=>import("./ancestry-shisk.454bc4c6.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-shoony.json":()=>s(()=>import("./ancestry-shoony.4507cf60.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-skeleton.json":()=>s(()=>import("./ancestry-skeleton.e21ad147.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-sprite.json":()=>s(()=>import("./ancestry-sprite.e86541d9.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-strix.json":()=>s(()=>import("./ancestry-strix.41a15f4b.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-tengu.json":()=>s(()=>import("./ancestry-tengu.d6b302cb.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-vanara.json":()=>s(()=>import("./ancestry-vanara.f23f4f4a.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-vishkanya.json":()=>s(()=>import("./ancestry-vishkanya.7c187811.js"),[],import.meta.url)});for(const a in i)i[a]().then(_=>{_.ancestry.forEach(m=>{m._path=a;const h=new g(m);this.update(y=>(y.set(h.hash,h),y))})})}return{subscribe:e,set:n,update:c,load:p}}const S=new L;function L(r="heritages",o=new Map){const t={parse:i=>new Map(JSON.parse(i)).map(a=>new E(a)),stringify:i=>JSON.stringify([...i])},{subscribe:e,set:n,update:c}=f(r,o,{serializer:t});function p(){s(()=>import("./versatile-heritages.2ef7b789.js"),[],import.meta.url).then(i=>{i.versatileHeritage.map(a=>(a._path="$data/ancestries/versatile-heritages.json",a)),i.versatileHeritage.forEach(a=>{const _=new E(a);this.update(l=>(l.set(_.hash,_),l))})})}return{subscribe:e,set:n,update:c,load:p}}export{j as S,v as m};
