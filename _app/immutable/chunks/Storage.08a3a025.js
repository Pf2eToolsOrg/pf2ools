import{w as A}from"./index.1134a329.js";import{_ as o}from"./preload-helper.41c905a7.js";import{D as R,n as T}from"./Toasts.68edbb10.js";Map.prototype.filter=Map.prototype.filter||function(r){const s=new Map;for(const[t,e]of this)r(e,t)&&s.set(t,e);return s};Map.prototype.map=Map.prototype.map||function(r){const s=new Map;for(const[t,e]of this)s.set(t,r(e,t));return s};Map.prototype.toValueArray=Map.prototype.toValueArray||function(){return[...this.values()]};Map.prototype.toKeyArray=Map.prototype.toKeyArray||function(){return[...this.keys()]};Map.prototype.firstKey=Map.prototype.firstKey||function(){return this.toKeyArray()[0]};Map.prototype.firstValue=Map.prototype.firstValue||function(){return this.toValueArray()[0]};Array.prototype.toTitleCase=Array.prototype.toTitleCase||function(){return this.map(r=>r.toTitleCase())};Array.prototype.joinConjunct=Array.prototype.joinConjunct||function(r,s,t){if(this.length===0)return"";if(this.length===1)return this[0];if(this.length===2)return this.join(s);{let e="";for(let a=0;a<this.length;++a)e+=this[a],a<this.length-2?e+=r:a===this.length-2&&(e+=`${!t&&this.length>2?r.trim():""}${s}`);return e}};String.prototype.remove=function(r){return this.replaceAll(r,"")};String.prototype.uppercaseFirst=String.prototype.uppercaseFirst||function(){const r=this.toString();return r.length===0?r:r.length===1?r.charAt(0).toUpperCase():r.charAt(0).toUpperCase()+r.slice(1)};String.prototype.lowercaseFirst=String.prototype.lowercaseFirst||function(){const r=this.toString();return r.length===0?r:r.length===1?r.charAt(0).toLowerCase():r.charAt(0).toLowerCase()+r.slice(1)};String.prototype.uq=String.prototype.uq||function(){return this.unescapeQuotes()};String.prototype.toTitleCase=String.prototype.toTitleCase||function(){let r=this.replace(/([^\W_]+[^\s-/]*) */g,e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase());u._TITLE_LOWER_WORDS_RE=u._TITLE_LOWER_WORDS_RE=u.TITLE_LOWER_WORDS.map(e=>new RegExp(`\\s${e}\\s`,"gi")),u._TITLE_UPPER_WORDS_RE=u._TITLE_UPPER_WORDS_RE=u.TITLE_UPPER_WORDS.map(e=>new RegExp(`\\b${e}\\b`,"g"));const s=u.TITLE_LOWER_WORDS.length;for(let e=0;e<s;e++)r=r.replace(u._TITLE_LOWER_WORDS_RE[e],a=>a.toLowerCase());const t=u.TITLE_UPPER_WORDS.length;for(let e=0;e<t;e++)r=r.replace(u._TITLE_UPPER_WORDS_RE[e],u.TITLE_UPPER_WORDS[e].toUpperCase());return r};String.prototype.toSentenceCase=String.prototype.toSentenceCase||function(){const r=[],s=/([^.!?]+)([.!?]\s*|$)/gi;let t;do t=s.exec(this),t&&r.push(t[0].toLowerCase().uppercaseFirst());while(t);return r.join("")};String.prototype.toSpellCase=String.prototype.toSpellCase||function(){return this.toLowerCase().replace(/(^|of )(bigby|otiluke|mordenkainen|evard|hadar|agathys|abi-dalzim|aganazzar|drawmij|leomund|maximilian|melf|nystul|otto|rary|snilloc|tasha|tenser|jim)('s|$| )/g,(...r)=>`${r[1]}${r[2].toTitleCase()}${r[3]}`)};String.prototype.toCamelCase=String.prototype.toCamelCase||function(){return this.split(" ").map((r,s)=>s===0?r.toLowerCase():`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()}`).join("")};String.prototype.escapeQuotes=String.prototype.escapeQuotes||function(){return this.replace(/'/g,"&apos;").replace(/"/g,"&quot;")};String.prototype.qq=String.prototype.qq||function(){return this.escapeQuotes()};String.prototype.unescapeQuotes=String.prototype.unescapeQuotes||function(){return this.replace(/&apos;/g,"'").replace(/&quot;/g,'"')};String.prototype.uq=String.prototype.uq||function(){return this.unescapeQuotes()};String.prototype.encodeApos=String.prototype.encodeApos||function(){return this.replace(/'/g,"%27")};String.prototype.distance=String.prototype.distance||function(r){let s=this,t,e;if(s){if(!r)return s.length}else return r?r.length:0;const a=s.length,c=r.length,_=a+c,i=new Array(a+2),n={};for(t=0;t<a+2;t++)i[t]=new Array(c+2);for(i[0][0]=_,t=0;t<=a;t++)i[t+1][1]=t,i[t+1][0]=_,n[s[t]]=0;for(e=0;e<=c;e++)i[1][e+1]=e,i[0][e+1]=_,n[r[e]]=0;for(t=1;t<=a;t++){let l=0;for(e=1;e<=c;e++){const d=n[r[e-1]],p=l;s[t-1]===r[e-1]?(i[t+1][e+1]=i[t][e],l=e):i[t+1][e+1]=Math.min(i[t][e],Math.min(i[t+1][e],i[t][e+1]))+1,i[t+1][e+1]=Math.min(i[t+1][e+1],i[d]?i[d][p]+(t-d-1)+1+(e-p-1):1/0)}n[s[t-1]]=t}return i[a+1][c+1]};String.prototype.isNumeric=String.prototype.isNumeric||function(){return!isNaN(parseFloat(this))&&isFinite(this)};String.prototype.last=String.prototype.last||function(){return this[this.length-1]};String.prototype.escapeRegexp=String.prototype.escapeRegexp||function(){return this.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")};String.prototype.toUrlified=String.prototype.toUrlified||function(){return encodeURIComponent(this.toLowerCase()).toLowerCase()};String.prototype.toChunks=String.prototype.toChunks||function(r){const s=Math.ceil(this.length/r),t=new Array(s);for(let e=0,a=0;e<s;++e,a+=r)t[e]=this.substr(a,r);return t};String.prototype.toAscii=String.prototype.toAscii||function(){return this.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/Æ/g,"AE").replace(/æ/g,"ae")};String.prototype.trimChar=String.prototype.trimChar||function(r){let s=0,t=this.length;for(;s<t&&this[s]===r;)++s;for(;t>s&&this[t-1]===r;)--t;return s>0||t<this.length?this.substring(s,t):this};String.prototype.trimAnyChar=String.prototype.trimAnyChar||function(r){let s=0,t=this.length;for(;s<t&&r.indexOf(this[s])>=0;)++s;for(;t>s&&r.indexOf(this[t-1])>=0;)--t;return s>0||t<this.length?this.substring(s,t):this};let u={COMMAS_NOT_IN_PARENTHESES_REGEX:/,\s?(?![^(]*\))/g,COMMA_SPACE_NOT_IN_PARENTHESES_REGEX:/, (?![^(]*\))/g,uppercaseFirst:function(r){return r.uppercaseFirst()},TITLE_LOWER_WORDS:["a","an","the","and","but","or","for","nor","as","at","by","for","from","in","into","near","of","on","onto","to","with","over"],TITLE_UPPER_WORDS:["Id","Tv","Dm","Ok"],padNumber:(r,s,t)=>String(r).padStart(s,t),elipsisTruncate(r,s=5,t=0,e=20){if(e>=r.length)return r;e=Math.max(s+t+3,e);let a="",c=e-(3+s+t);for(let _=0;_<r.length-t;++_){const i=r[_];(_<s||c-- >0)&&(a+=i)}return c<0&&(a+="..."),a+=r.substring(r.length-t,r.length),a},toTitleCase(r){return r.toTitleCase()},getNamePart(r){return typeof r!="string"?r:r.split(" ").filter(s=>!u.TITLE_LOWER_WORDS.includes(s.toLowerCase())).join(" ")}};function D(){const{subscribe:r,set:s,update:t}=A([]);return{subscribe:r,set:s,update:t,trigger:e=>t(a=>(a.push(e),a)),close:()=>t(e=>(e.length>0&&e.shift(),e)),clear:()=>s([])}}const V=D();class f extends R{constructor(s){super(s),O.subscribe(t=>{this.heritages=t.filter(e=>e.versatile||e.ancestryName===this.name&&e.ancestrySource===this.source)}),Object.defineProperty(this,"traits",{get(){var t;return[...new Set([this.JSON.traits??[],this.size??[],this.rarity??"common",((t=this==null?void 0:this.selectedHeritage)==null?void 0:t.traits)??[]].flat())]}}),Object.defineProperty(this,"images",{get(){var e,a;const t=[];return(e=this.JSON)!=null&&e.images&&t.push(...this.JSON.images),(a=this==null?void 0:this.selectedHeritage)!=null&&a.images&&t.push({type:"pf2-h3",name:this.selectedHeritage.name,entries:[{type:"hr"},...this.selectedHeritage.images]}),t}})}get type(){return"ancestry"}get extraHp(){let s=[];return this.heritages.forEach(t=>{var e,a;(a=(e=t==null?void 0:t.modif)==null?void 0:e.hp)!=null&&a.ancestry&&s.push({hp:t.modif.hp.ancestry,name:t.name,source:t.source,hash:this.hashify(t.name,t.source)})}),s.length?s:null}}class h extends R{constructor(s,t){super(s),t&&(this.ancestryName=t.name,this.ancestrySource=t.source)}get type(){return"heritage"}tag(s){return`${this.ancestryName??"Human"}|${this.ancestrySource??"CRB"}|${s??this.name}|${this.name}|${this.source}`}}class C{constructor(){this.ancestries=L,this.heritages=O}loadAll(){this.ancestries.load(),this.heritages.load()}}const L=new I;function I(r="ancestries",s=new Map){const t={parse:i=>new Map(JSON.parse(i)).map(n=>new f(n)),stringify:i=>JSON.stringify([...i])},{subscribe:e,set:a,update:c}=T(r,s,{serializer:t});function _(){const i=Object.assign({"/src/data/core/ancestries/ancestry-anadi.json":()=>o(()=>import("./ancestry-anadi.1dfa6c74.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-android.json":()=>o(()=>import("./ancestry-android.22dcb6be.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-automaton.json":()=>o(()=>import("./ancestry-automaton.3efcee38.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-azarketi.json":()=>o(()=>import("./ancestry-azarketi.3b917f28.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-catfolk.json":()=>o(()=>import("./ancestry-catfolk.bd5045af.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-conrasu.json":()=>o(()=>import("./ancestry-conrasu.da2e4c50.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-dwarf.json":()=>o(()=>import("./ancestry-dwarf.a9c56490.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-elf.json":()=>o(()=>import("./ancestry-elf.a6be3b57.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-fetchling.json":()=>o(()=>import("./ancestry-fetchling.e33e9008.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-fleshwarp.json":()=>o(()=>import("./ancestry-fleshwarp.595602f6.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-ghoran.json":()=>o(()=>import("./ancestry-ghoran.6df40ca1.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-gnoll.json":()=>o(()=>import("./ancestry-gnoll.126cb3ed.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-gnome.json":()=>o(()=>import("./ancestry-gnome.29e51bc5.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-goblin.json":()=>o(()=>import("./ancestry-goblin.20b6d1cf.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-goloma.json":()=>o(()=>import("./ancestry-goloma.dd6e3190.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-grippli.json":()=>o(()=>import("./ancestry-grippli.fdaff84b.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-halfling.json":()=>o(()=>import("./ancestry-halfling.869fea2a.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-hobgoblin.json":()=>o(()=>import("./ancestry-hobgoblin.1982cdf8.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-human.json":()=>o(()=>import("./ancestry-human.c6d51bf9.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-kashrishi.json":()=>o(()=>import("./ancestry-kashrishi.d4a79401.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-kitsune.json":()=>o(()=>import("./ancestry-kitsune.7a0d21b9.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-kobold.json":()=>o(()=>import("./ancestry-kobold.943b8121.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-leshy.json":()=>o(()=>import("./ancestry-leshy.4488d032.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-lizardfolk.json":()=>o(()=>import("./ancestry-lizardfolk.838c0136.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-nagaji.json":()=>o(()=>import("./ancestry-nagaji.4695cdf8.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-orc.json":()=>o(()=>import("./ancestry-orc.0dc73a51.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-poppet.json":()=>o(()=>import("./ancestry-poppet.65e96566.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-ratfolk.json":()=>o(()=>import("./ancestry-ratfolk.4edfccc8.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-shisk.json":()=>o(()=>import("./ancestry-shisk.454bc4c6.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-shoony.json":()=>o(()=>import("./ancestry-shoony.4507cf60.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-skeleton.json":()=>o(()=>import("./ancestry-skeleton.e21ad147.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-sprite.json":()=>o(()=>import("./ancestry-sprite.3d66accc.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-strix.json":()=>o(()=>import("./ancestry-strix.41a15f4b.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-tengu.json":()=>o(()=>import("./ancestry-tengu.d6b302cb.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-vanara.json":()=>o(()=>import("./ancestry-vanara.f23f4f4a.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-vishkanya.json":()=>o(()=>import("./ancestry-vishkanya.7c187811.js"),[],import.meta.url)});for(const n in i)i[n]().then(l=>{l.ancestry.forEach(p=>{p._path=n;const E=new f(p);this.update(m=>(m.set(E.hash,E),m))})})}return{subscribe:e,set:a,update:c,load:_}}const O=new v;function v(r="heritages",s=new Map){const t={parse:i=>new Map(JSON.parse(i)).map(n=>new h(n)),stringify:i=>JSON.stringify([...i])},{subscribe:e,set:a,update:c}=T(r,s,{serializer:t});function _(){const i=Object.assign({"/src/data/core/ancestries/ancestry-anadi.json":()=>o(()=>import("./ancestry-anadi.1dfa6c74.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-android.json":()=>o(()=>import("./ancestry-android.22dcb6be.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-automaton.json":()=>o(()=>import("./ancestry-automaton.3efcee38.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-azarketi.json":()=>o(()=>import("./ancestry-azarketi.3b917f28.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-catfolk.json":()=>o(()=>import("./ancestry-catfolk.bd5045af.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-conrasu.json":()=>o(()=>import("./ancestry-conrasu.da2e4c50.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-dwarf.json":()=>o(()=>import("./ancestry-dwarf.a9c56490.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-elf.json":()=>o(()=>import("./ancestry-elf.a6be3b57.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-fetchling.json":()=>o(()=>import("./ancestry-fetchling.e33e9008.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-fleshwarp.json":()=>o(()=>import("./ancestry-fleshwarp.595602f6.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-ghoran.json":()=>o(()=>import("./ancestry-ghoran.6df40ca1.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-gnoll.json":()=>o(()=>import("./ancestry-gnoll.126cb3ed.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-gnome.json":()=>o(()=>import("./ancestry-gnome.29e51bc5.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-goblin.json":()=>o(()=>import("./ancestry-goblin.20b6d1cf.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-goloma.json":()=>o(()=>import("./ancestry-goloma.dd6e3190.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-grippli.json":()=>o(()=>import("./ancestry-grippli.fdaff84b.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-halfling.json":()=>o(()=>import("./ancestry-halfling.869fea2a.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-hobgoblin.json":()=>o(()=>import("./ancestry-hobgoblin.1982cdf8.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-human.json":()=>o(()=>import("./ancestry-human.c6d51bf9.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-kashrishi.json":()=>o(()=>import("./ancestry-kashrishi.d4a79401.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-kitsune.json":()=>o(()=>import("./ancestry-kitsune.7a0d21b9.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-kobold.json":()=>o(()=>import("./ancestry-kobold.943b8121.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-leshy.json":()=>o(()=>import("./ancestry-leshy.4488d032.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-lizardfolk.json":()=>o(()=>import("./ancestry-lizardfolk.838c0136.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-nagaji.json":()=>o(()=>import("./ancestry-nagaji.4695cdf8.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-orc.json":()=>o(()=>import("./ancestry-orc.0dc73a51.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-poppet.json":()=>o(()=>import("./ancestry-poppet.65e96566.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-ratfolk.json":()=>o(()=>import("./ancestry-ratfolk.4edfccc8.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-shisk.json":()=>o(()=>import("./ancestry-shisk.454bc4c6.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-shoony.json":()=>o(()=>import("./ancestry-shoony.4507cf60.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-skeleton.json":()=>o(()=>import("./ancestry-skeleton.e21ad147.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-sprite.json":()=>o(()=>import("./ancestry-sprite.3d66accc.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-strix.json":()=>o(()=>import("./ancestry-strix.41a15f4b.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-tengu.json":()=>o(()=>import("./ancestry-tengu.d6b302cb.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-vanara.json":()=>o(()=>import("./ancestry-vanara.f23f4f4a.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-vishkanya.json":()=>o(()=>import("./ancestry-vishkanya.7c187811.js"),[],import.meta.url),"/src/data/core/ancestries/versatile-heritages.json":()=>o(()=>import("./versatile-heritages.2ef7b789.js"),[],import.meta.url)});for(const n in i)i[n]().then(l=>{l.versatileHeritage?l.versatileHeritage.forEach(p=>{p._path=n;const E=new h(p);this.update(m=>(m.set(E.hash,E),m))}):l.ancestry.forEach(p=>{p.heritage.forEach(m=>{m.ancestryName=p.name,m.ancestrySource=p.source,m._path=n;const y=new h(m);this.update(g=>(g.set(y.hash,y),g))})})})}return{subscribe:e,set:a,update:c,load:_}}export{C as S,V as m};
