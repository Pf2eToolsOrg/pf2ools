var oe=Object.defineProperty;var se=(y,n,e)=>n in y?oe(y,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):y[n]=e;var N=(y,n,e)=>(se(y,typeof n!="symbol"?n+"":n,e),e);import{S as ce,i as ue,s as le,k as me,a as fe,l as he,m as de,h as U,c as pe,a7 as _e,n as ge,b as F,g as z,d as X,o as ve,y as ye,z as Ee,A as Pe,B as we}from"../chunks/index.734d585a.js";import"../chunks/Toasts.a2b6f5b5.js";import{D as G,R as Ae}from"../chunks/Renderer.5db2592e.js";import{_ as u}from"../chunks/preload-helper.41c905a7.js";class Te extends G{constructor(n){super(n),this.traitsPrototype=n.traits,Object.defineProperty(this,"traits",{get(){return[this.traitsPrototype,this.size,this.rarity??"common"].flat()}})}get type(){return"ancestry"}get extraHp(){let n=[];return this.heritage.forEach(e=>{var c,d;(d=(c=e==null?void 0:e.modif)==null?void 0:c.hp)!=null&&d.ancestry&&n.push({hp:e.modif.hp.ancestry,name:e.name,source:e.source,hash:this.hashify(e.name,e.source)})}),n.length?n:null}get heritages(){return(async()=>await q.heritages)().then(n=>n.filter(e=>e.ancestryName===this.name&&e.ancestrySource===this.source))}}class De extends G{constructor(n,e){super(n),e&&(this.ancestryName=e.name,this.ancestrySource=e.source)}get type(){return"heritage"}tag(n){return`${this.ancestryName??"Human"}|${this.ancestrySource??"CRB"}|${n??this.name}|${this.name}|${this.source}`}}class Re{constructor(){N(this,"getData",{ancestries:async()=>{const n=Object.assign({"/src/data/core/ancestries/ancestry-anadi.json":()=>u(()=>import("../chunks/ancestry-anadi.c9147a4b.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-android.json":()=>u(()=>import("../chunks/ancestry-android.22dcb6be.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-automaton.json":()=>u(()=>import("../chunks/ancestry-automaton.fee60d93.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-azarketi.json":()=>u(()=>import("../chunks/ancestry-azarketi.3b917f28.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-catfolk.json":()=>u(()=>import("../chunks/ancestry-catfolk.bd5045af.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-conrasu.json":()=>u(()=>import("../chunks/ancestry-conrasu.da2e4c50.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-dwarf.json":()=>u(()=>import("../chunks/ancestry-dwarf.a9c56490.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-elf.json":()=>u(()=>import("../chunks/ancestry-elf.a6be3b57.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-fetchling.json":()=>u(()=>import("../chunks/ancestry-fetchling.e33e9008.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-fleshwarp.json":()=>u(()=>import("../chunks/ancestry-fleshwarp.595602f6.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-ghoran.json":()=>u(()=>import("../chunks/ancestry-ghoran.6df40ca1.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-gnoll.json":()=>u(()=>import("../chunks/ancestry-gnoll.126cb3ed.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-gnome.json":()=>u(()=>import("../chunks/ancestry-gnome.29e51bc5.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-goblin.json":()=>u(()=>import("../chunks/ancestry-goblin.20b6d1cf.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-goloma.json":()=>u(()=>import("../chunks/ancestry-goloma.dd6e3190.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-grippli.json":()=>u(()=>import("../chunks/ancestry-grippli.fdaff84b.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-halfling.json":()=>u(()=>import("../chunks/ancestry-halfling.869fea2a.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-hobgoblin.json":()=>u(()=>import("../chunks/ancestry-hobgoblin.1982cdf8.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-human.json":()=>u(()=>import("../chunks/ancestry-human.c6d51bf9.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-kashrishi.json":()=>u(()=>import("../chunks/ancestry-kashrishi.d4a79401.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-kitsune.json":()=>u(()=>import("../chunks/ancestry-kitsune.7a0d21b9.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-kobold.json":()=>u(()=>import("../chunks/ancestry-kobold.943b8121.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-leshy.json":()=>u(()=>import("../chunks/ancestry-leshy.4488d032.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-lizardfolk.json":()=>u(()=>import("../chunks/ancestry-lizardfolk.838c0136.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-nagaji.json":()=>u(()=>import("../chunks/ancestry-nagaji.4695cdf8.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-orc.json":()=>u(()=>import("../chunks/ancestry-orc.0dc73a51.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-poppet.json":()=>u(()=>import("../chunks/ancestry-poppet.65e96566.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-ratfolk.json":()=>u(()=>import("../chunks/ancestry-ratfolk.4edfccc8.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-shisk.json":()=>u(()=>import("../chunks/ancestry-shisk.454bc4c6.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-shoony.json":()=>u(()=>import("../chunks/ancestry-shoony.4507cf60.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-skeleton.json":()=>u(()=>import("../chunks/ancestry-skeleton.e21ad147.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-sprite.json":()=>u(()=>import("../chunks/ancestry-sprite.e86541d9.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-strix.json":()=>u(()=>import("../chunks/ancestry-strix.41a15f4b.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-tengu.json":()=>u(()=>import("../chunks/ancestry-tengu.d6b302cb.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-vanara.json":()=>u(()=>import("../chunks/ancestry-vanara.f23f4f4a.js"),[],import.meta.url),"/src/data/core/ancestries/ancestry-vishkanya.json":()=>u(()=>import("../chunks/ancestry-vishkanya.7c187811.js"),[],import.meta.url)}),e=new Map;for(const c in n)await n[c]().then(d=>{d.ancestry.forEach(w=>{w._path=c;const T=new Te(w);e.set(T.hash,T)})});return e},heritages:async()=>{let n=[];await u(()=>import("../chunks/versatile-heritages.2ef7b789.js"),[],import.meta.url).then(c=>{c.versatileHeritage.map(d=>(d._path="$data/ancestries/versatile-heritages.json",d)),n=c.versatileHeritage}),(await this.ancestries).forEach(c=>{n.push(...c.heritage)});const e=new Map;return n.forEach(c=>{const d=new De(c);e.set(d.hash,d)}),e}});this._ancestries=null,this._heritages=null}get ancestries(){return this._ancestries??(async()=>(this._ancestries=await this.getData.ancestries(),this._ancestries))()}get heritages(){return this._heritages??(async()=>(this._heritages=await this.getData.heritages(),this._heritages))()}}const q=new Re;var Ie={exports:{}};(function(y){(function(n){var e=re(),c=ne(),d=ae(),g=ie(),w={imagePlaceholder:void 0,cacheBust:!1},T={toSvg:M,toPng:J,toJpeg:K,toBlob:Q,toPixelData:W,impl:{fontFaces:d,images:g,util:e,inliner:c,options:{}}};y.exports=T;function M(a,r){return r=r||{},Y(r),Promise.resolve(a).then(function(s){return H(s,r.filter,!0)}).then(Z).then(ee).then(i).then(function(s){return te(s,r.width||e.width(a),r.height||e.height(a))});function i(s){return r.bgcolor&&(s.style.backgroundColor=r.bgcolor),r.width&&(s.style.width=r.width+"px"),r.height&&(s.style.height=r.height+"px"),r.style&&Object.keys(r.style).forEach(function(h){s.style[h]=r.style[h]}),s}}function W(a,r){return k(a,r||{}).then(function(i){return i.getContext("2d").getImageData(0,0,e.width(a),e.height(a)).data})}function J(a,r){return k(a,r||{}).then(function(i){return i.toDataURL()})}function K(a,r){return r=r||{},k(a,r).then(function(i){return i.toDataURL("image/jpeg",r.quality||1)})}function Q(a,r){return k(a,r||{}).then(e.canvasToBlob)}function Y(a){typeof a.imagePlaceholder>"u"?T.impl.options.imagePlaceholder=w.imagePlaceholder:T.impl.options.imagePlaceholder=a.imagePlaceholder,typeof a.cacheBust>"u"?T.impl.options.cacheBust=w.cacheBust:T.impl.options.cacheBust=a.cacheBust}function k(a,r){return M(a,r).then(e.makeImage).then(e.delay(100)).then(function(s){var h=i(a);return h.getContext("2d").drawImage(s,0,0),h});function i(s){var h=document.createElement("canvas");if(h.width=r.width||e.width(s),h.height=r.height||e.height(s),r.bgcolor){var f=h.getContext("2d");f.fillStyle=r.bgcolor,f.fillRect(0,0,h.width,h.height)}return h}}function H(a,r,i){if(!i&&r&&!r(a))return Promise.resolve();return Promise.resolve(a).then(s).then(function(o){return h(a,o,r)}).then(function(o){return f(a,o)});function s(o){return o instanceof HTMLCanvasElement?e.makeImage(o.toDataURL()):o.cloneNode(!1)}function h(o,l,A){var b=o.childNodes;if(b.length===0)return Promise.resolve(l);return v(l,e.asArray(b),A).then(function(){return l});function v(S,D,E){var R=Promise.resolve();return D.forEach(function(x){R=R.then(function(){return H(x,E)}).then(function(I){I&&S.appendChild(I)})}),R}}function f(o,l){if(!(l instanceof Element))return l;return Promise.resolve().then(A).then(b).then(v).then(S).then(function(){return l});function A(){D(window.getComputedStyle(o),l.style);function D(E,R){E.cssText?R.cssText=E.cssText:x(E,R);function x(I,j){e.asArray(I).forEach(function(t){j.setProperty(t,I.getPropertyValue(t),I.getPropertyPriority(t))})}}}function b(){[":before",":after"].forEach(function(E){D(E)});function D(E){var R=window.getComputedStyle(o,E),x=R.getPropertyValue("content");if(x===""||x==="none")return;var I=e.uid();l.className=l.className+" "+I;var j=document.createElement("style");j.appendChild(t(I,E,R)),l.appendChild(j);function t(m,_,p){var P="."+m+":"+_,L=p.cssText?$(p):B(p);return document.createTextNode(P+"{"+L+"}");function $(O){var V=O.getPropertyValue("content");return O.cssText+" content: "+V+";"}function B(O){return e.asArray(O).map(V).join("; ")+";";function V(C){return C+": "+O.getPropertyValue(C)+(O.getPropertyPriority(C)?" !important":"")}}}}}function v(){o instanceof HTMLTextAreaElement&&(l.innerHTML=o.value),o instanceof HTMLInputElement&&l.setAttribute("value",o.value)}function S(){l instanceof SVGElement&&(l.setAttribute("xmlns","http://www.w3.org/2000/svg"),l instanceof SVGRectElement&&["width","height"].forEach(function(D){var E=l.getAttribute(D);E&&l.style.setProperty(D,E)}))}}}function Z(a){return d.resolveAll().then(function(r){var i=document.createElement("style");return a.appendChild(i),i.appendChild(document.createTextNode(r)),a})}function ee(a){return g.inlineAll(a).then(function(){return a})}function te(a,r,i){return Promise.resolve(a).then(function(s){return s.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(s)}).then(e.escapeXhtml).then(function(s){return'<foreignObject x="0" y="0" width="100%" height="100%">'+s+"</foreignObject>"}).then(function(s){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+r+'" height="'+i+'">'+s+"</svg>"}).then(function(s){return"data:image/svg+xml;charset=utf-8,"+s})}function re(){return{escape:S,parseExtension:r,mimeType:i,dataAsUrl:v,isDataUrl:s,canvasToBlob:f,resolveUrl:o,getAndEncode:b,uid:l(),delay:D,asArray:E,escapeXhtml:R,makeImage:A,width:x,height:I};function a(){var t="application/font-woff",m="image/jpeg";return{woff:t,woff2:t,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:m,jpeg:m,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function r(t){var m=/\.([^\.\/]*?)$/g.exec(t);return m?m[1]:""}function i(t){var m=r(t).toLowerCase();return a()[m]||""}function s(t){return t.search(/^(data:)/)!==-1}function h(t){return new Promise(function(m){for(var _=window.atob(t.toDataURL().split(",")[1]),p=_.length,P=new Uint8Array(p),L=0;L<p;L++)P[L]=_.charCodeAt(L);m(new Blob([P],{type:"image/png"}))})}function f(t){return t.toBlob?new Promise(function(m){t.toBlob(m)}):h(t)}function o(t,m){var _=document.implementation.createHTMLDocument(),p=_.createElement("base");_.head.appendChild(p);var P=_.createElement("a");return _.body.appendChild(P),p.href=m,P.href=t,P.href}function l(){var t=0;return function(){return"u"+m()+t++;function m(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}}function A(t){return new Promise(function(m,_){var p=new Image;p.onload=function(){m(p)},p.onerror=_,p.src=t})}function b(t){var m=3e4;return T.impl.options.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime()),new Promise(function(_){var p=new XMLHttpRequest;p.onreadystatechange=$,p.ontimeout=B,p.responseType="blob",p.timeout=m,p.open("GET",t,!0),p.send();var P;if(T.impl.options.imagePlaceholder){var L=T.impl.options.imagePlaceholder.split(/,/);L&&L[1]&&(P=L[1])}function $(){if(p.readyState===4){if(p.status!==200){P?_(P):O("cannot fetch resource: "+t+", status: "+p.status);return}var V=new FileReader;V.onloadend=function(){var C=V.result.split(/,/)[1];_(C)},V.readAsDataURL(p.response)}}function B(){P?_(P):O("timeout of "+m+"ms occured while fetching resource: "+t)}function O(V){console.error(V),_("")}})}function v(t,m){return"data:"+m+";base64,"+t}function S(t){return t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function D(t){return function(m){return new Promise(function(_){setTimeout(function(){_(m)},t)})}}function E(t){for(var m=[],_=t.length,p=0;p<_;p++)m.push(t[p]);return m}function R(t){return t.replace(/#/g,"%23").replace(/\n/g,"%0A")}function x(t){var m=j(t,"border-left-width"),_=j(t,"border-right-width");return t.scrollWidth+m+_}function I(t){var m=j(t,"border-top-width"),_=j(t,"border-bottom-width");return t.scrollHeight+m+_}function j(t,m){var _=window.getComputedStyle(t).getPropertyValue(m);return parseFloat(_.replace("px",""))}}function ne(){var a=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:h,shouldProcess:r,impl:{readUrls:i,inline:s}};function r(f){return f.search(a)!==-1}function i(f){for(var o=[],l;(l=a.exec(f))!==null;)o.push(l[1]);return o.filter(function(A){return!e.isDataUrl(A)})}function s(f,o,l,A){return Promise.resolve(o).then(function(v){return l?e.resolveUrl(v,l):v}).then(A||e.getAndEncode).then(function(v){return e.dataAsUrl(v,e.mimeType(o))}).then(function(v){return f.replace(b(o),"$1"+v+"$3")});function b(v){return new RegExp(`(url\\(['"]?)(`+e.escape(v)+`)(['"]?\\))`,"g")}}function h(f,o,l){if(A())return Promise.resolve(f);return Promise.resolve(f).then(i).then(function(b){var v=Promise.resolve(f);return b.forEach(function(S){v=v.then(function(D){return s(D,S,o,l)})}),v});function A(){return!r(f)}}}function ae(){return{resolveAll:a,impl:{readAll:r}};function a(){return r().then(function(i){return Promise.all(i.map(function(s){return s.resolve()}))}).then(function(i){return i.join(`
`)})}function r(){return Promise.resolve(e.asArray(document.styleSheets)).then(s).then(i).then(function(f){return f.map(h)});function i(f){return f.filter(function(o){return o.type===CSSRule.FONT_FACE_RULE}).filter(function(o){return c.shouldProcess(o.style.getPropertyValue("src"))})}function s(f){var o=[];return f.forEach(function(l){try{e.asArray(l.cssRules||[]).forEach(o.push.bind(o))}catch(A){console.log("Error while reading CSS rules from "+l.href,A.toString())}}),o}function h(f){return{resolve:function(){var l=(f.parentStyleSheet||{}).href;return c.inlineAll(f.cssText,l)},src:function(){return f.style.getPropertyValue("src")}}}}}function ie(){return{inlineAll:r,impl:{newImage:a}};function a(i){return{inline:s};function s(h){return e.isDataUrl(i.src)?Promise.resolve():Promise.resolve(i.src).then(h||e.getAndEncode).then(function(f){return e.dataAsUrl(f,e.mimeType(i.src))}).then(function(f){return new Promise(function(o,l){i.onload=o,i.onerror=l,i.src=f})})}}function r(i){if(!(i instanceof Element))return Promise.resolve(i);return s(i).then(function(){return i instanceof HTMLImageElement?a(i).inline():Promise.all(e.asArray(i.childNodes).map(function(h){return r(h)}))});function s(h){var f=h.style.getPropertyValue("background");return f?c.inlineAll(f).then(function(o){h.style.setProperty("background",o,h.style.getPropertyPriority("background"))}).then(function(){return h}):Promise.resolve(h)}}}})()})(Ie);function be(y){let n,e;return n=new Ae({props:{entries:y[0]}}),{c(){ye(n.$$.fragment)},l(c){Ee(n.$$.fragment,c)},m(c,d){Pe(n,c,d),e=!0},p(c,d){const g={};d&1&&(g.entries=c[0]),n.$set(g)},i(c){e||(z(n.$$.fragment,c),e=!0)},o(c){X(n.$$.fragment,c),e=!1},d(c){we(n,c)}}}function Le(y){let n,e,c,d=be(y);return{c(){n=me("div"),d&&d.c(),e=fe(),this.h()},l(g){n=he(g,"DIV",{class:!0});var w=de(n);d&&d.l(w),w.forEach(U),e=pe(g),_e("svelte-1u63yc1",document.head).forEach(U),this.h()},h(){ge(n,"class","container h-[90vh] flex"),document.title="PF2ools"},m(g,w){F(g,n,w),d&&d.m(n,null),F(g,e,w),c=!0},p(g,[w]){d.p(g,w)},i(g){c||(z(d),c=!0)},o(g){X(d),c=!1},d(g){g&&U(n),d&&d.d(),g&&U(e)}}}function je(y,n,e){let c;return ve(async()=>{e(0,c=(await q.ancestries).firstValue())}),[c]}class ke extends ce{constructor(n){super(),ue(this,n,je,Le,le,{})}}export{ke as component};
